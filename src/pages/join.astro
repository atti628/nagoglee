---
import Layout from '../layouts/Layout.astro';
import { getAbout } from "../library/microcms";

// 団紹介(about)データを取得
const about = await getAbout();

const pageInfo = {
  title: "JOIN US",
  subtitle: "入団案内",
  bgImage: "/images/IMG_3947.JPG",
};
---

<Layout title={`${pageInfo.subtitle} | NagoGlee`}>

  <div class="relative h-[40vh] min-h-[300px] flex items-center justify-center bg-cover bg-center" 
       style={`background-image: url('${pageInfo.bgImage}');`}>
    <div class="absolute inset-0 bg-black/40"></div>
    <div class="relative z-10 text-center text-white">
      <h1 class="text-5xl md:text-6xl font-black tracking-widest drop-shadow-[0_0_15px_rgba(255,255,255,0.8)] mb-2">
        {pageInfo.title}
      </h1>
      <p class="text-lg font-bold tracking-[0.2em] opacity-90">{pageInfo.subtitle}</p>
    </div>
  </div>

  <div class="bg-[#FDFBF7] py-20 px-4 text-black">
    <div class="max-w-4xl mx-auto space-y-24">

      <section class="animate-on-scroll opacity-0 translate-y-10 transition-all duration-1000">
        <h2 class="text-[#228B22] text-3xl font-black tracking-widest mb-8 text-center border-b-2 border-[#DDCBB4] inline-block pb-2 mx-auto table">
          MESSAGE
          <span class="block text-sm text-gray-500 font-normal mt-1 tracking-normal">メッセージ</span>
        </h2>

        <div class="bg-white p-8 md:p-12 shadow-sm border border-[#DDCBB4] rounded-sm">
           <div class="rich-text text-lg leading-loose" set:html={about.message} />
        </div>
      </section>

      <section class="animate-on-scroll opacity-0 translate-y-10 transition-all duration-1000">
        <h2 class="text-[#228B22] text-3xl font-black tracking-widest mb-8 text-center border-b-2 border-[#DDCBB4] inline-block pb-2 mx-auto table">
          PROFILE
          <span class="block text-sm text-gray-500 font-normal mt-1 tracking-normal">団の概要</span>
        </h2>

        <div class="bg-white p-8 md:p-12 shadow-sm border border-[#DDCBB4] rounded-sm">
           <div class="rich-text" set:html={about.profile} />
        </div>
      </section>

      <section class="text-center animate-on-scroll opacity-0 translate-y-10 transition-all duration-1000">
        <h2 class="text-[#228B22] text-3xl font-black tracking-widest mb-8 text-center border-b-2 border-[#DDCBB4] inline-block pb-2 mx-auto table">
          CONTACT
          <span class="block text-sm text-gray-500 font-normal mt-1 tracking-normal">連絡先</span>
        </h2>

        <p class="mb-8 text-lg font-bold">
          見学・体験はいつでも大歓迎です！<br>
          まずはお気軽にご連絡ください。
        </p>
        
        <div class="flex flex-col md:flex-row justify-center gap-6">
          {about.email && (
            <a href={`mailto:${about.email}`} class="inline-block bg-[#228B22] text-white font-bold py-4 px-10 shadow-lg hover:bg-[#1a6b1a] hover:-translate-y-1 transition-all duration-300 tracking-widest rounded-sm">
              メールで連絡する
            </a>
          )}
          {about.twitter && (
            <a href={about.twitter} target="_blank" rel="noopener noreferrer" class="inline-block bg-black text-white font-bold py-4 px-10 shadow-lg hover:bg-gray-800 hover:-translate-y-1 transition-all duration-300 tracking-widest rounded-sm">
              Twitter DMで連絡する
            </a>
          )}
        </div>
      </section>

    </div>
  </div>

</Layout>

<style is:global>
    /* --------------------------------------------------
       PC・スマホ共通の設定
    -------------------------------------------------- */
    
    /* rich-textの基本設定 */
    .rich-text p { margin-bottom: 1.5em; line-height: 1.8; }
    
    /* ★追加：表の中にあるpタグの余白はゼロにする（これが空白の原因です！） */
    .rich-text table p {
        margin-bottom: 0;
    }
    
    /* テーブル全体の基本リセット */
    .rich-text table {
      width: 100%;
      border-collapse: collapse;
      margin: 2em 0;
      font-size: 1rem;
    }
  
    /* セルの共通設定 */
    .rich-text th, 
    .rich-text td {
      border: 1px solid #DDCBB4; /* 枠線 */
      padding: 1.2em;            /* 余白 */
      text-align: left;
      vertical-align: top;
    }
  
    /* --- PC表示 (640px以上) の設定 --- */
    @media (min-width: 641px) {
      /* 左側の項目（見出し）のデザイン */
      .rich-text th,
      .rich-text tr td:first-child {
        background-color: #FDFBF7; /* アイボリー背景 */
        color: #228B22;            /* 緑文字 */
        font-weight: 900;          /* 太字 */
        white-space: nowrap;       /* 改行させない */
        width: 30%;                /* 幅を30%に固定 */
        min-width: 160px;          /* 最低幅を確保 */
      }
    }
  
    /* --- スマホ表示 (640px以下) の設定 --- */
    @media (max-width: 640px) {
      /* テーブルの構造をブロック崩しのように解除する */
      .rich-text table, 
      .rich-text tbody, 
      .rich-text tr, 
      .rich-text th, 
      .rich-text td {
        display: block; 
        width: 100% !important; /* 幅を強制的に100%にする */
        box-sizing: border-box; /* パディングを含めて100%にする */
        border: none;           /* 一旦枠線を消す */
      }
  
      /* 「行(tr)」を一つのカードとしてデザインする */
      .rich-text tr {
        margin-bottom: 1.5rem;      /* 下のカードとの間隔 */
        border: 2px solid #DDCBB4;  /* 外枠をつける */
        border-radius: 4px;         /* 角を少し丸く */
        overflow: hidden;           /* 角丸からはみ出さないように */
      }
  
      /* 見出し部分 (th) */
      .rich-text th,
      .rich-text tr td:first-child {
        background-color: #FDFBF7;
        color: #228B22;
        font-weight: bold;
        padding: 0.8rem 1rem;
        border-bottom: 1px solid #DDCBB4; /* 下に線を入れて区切る */
      }
  
      /* 内容部分 (td) */
      .rich-text td,
      .rich-text tr td:last-child {
        background-color: #fff;
        padding: 1rem;
      }
    }
  
    /* 箇条書きリスト */
    .rich-text ul { list-style-type: disc; padding-left: 1.5em; margin: 1em 0; }
    .rich-text ol { list-style-type: decimal; padding-left: 1.5em; margin: 1em 0; }
  </style>